# QianQianCaterSystem


## 项目的一些信息
1. 把邮件工具类中的邮箱地址和授权码抽取成配置文件，这样可以保护私密信息不在代码里，
	也更合理，不用再修改代码。在git中设置了忽略此配置文件。
	
2. 通过异步方式加载页头页脚会出现页面打开闪烁的现象

	客户端页面的浏览体验一定要好，所以动态页面应该更好一些，通过`jsp`的`include`标签插入页面上不变的部分
	
	换成动态页面后体验提升了一个档次，页面加载流畅丝滑。	

## 项目的另一些信息

1. 前端框架bootstrap3
	
	感觉可以使用的东西不多，而且十分不灵活，也许是没有学过Less的原因，没有对底层有深刻的认识，
	使用上束手束脚，不能随意地在已定的框子里添加自己的东西，应该是列都是浮动实现的，
	所以加入自己的东西，如果没有可以套用的css，几乎就是分离的，格格不入的。
	自己定义的样式不敢多加，自己写的宽高边距没有任何响应式，在窗口变化的时候几乎就是灾难。
	
	bootstrap框架整体比较圆润，与国内的网站风格有一些出入。

2. 数据源

	试着使用druid数据源，相比c3p0要简单一些，阿里巴巴出品是当前最好的数据源。
	
3. DAO工具

	在用户模块使用spring框架内置的Template工具，因为构建核心对象Template的时候直接传入了数据源，
	没有连接对象所以不能实现事务操作，当然这是没有采用spring框架的情况。
	该对象的方法的特点是要求返回的结果比较严格，期望是一个结果，就不能是两个，
	这一点在DbUtils上比较宽松，如果多个结果就封装第一条返回。
	
	计划在菜品和订单这些操作上用DbUtils，都尽量练习一下。
	

## 遇到的困难、问题和踩过的坑等
### 1.Ajax 异步请求验证的问题
在提交时发送异步请求提交数据，这是正常且合理的，在发送ajax之前需要检查各项输入是否符合要求，
这也是合理的，注册时，用户名要求唯一，所以需要发送异步请求询问后端，
但是这个验证用户名的请求还	没有返回时，可能就已经提交数据，或者前端验证不通过，
因为请求是异步的，所以无论用户名正确与否都无法阻止提交动作和提交请求。

**结论：**异步请求中不能包含异步请求，这会导致互相无法配合，就像它们的名字一样，始终无法同步。

**解决：**  
方式一： 在用户名输入框失去焦点或者内容改变时，发送异步请求，
将检查结果以`input`标签属性的方式记录下来，提交的时候检查标记即可。   
方式二： 在前一个ajax请求的回调函数里调用第二个ajax请求就没问题了。这样保证他们顺序执行。
	
### 2.jsp中EL表达式失效问题  
在jsp中使用EL表达式失效，原因是web.xml文件的版本问题。  
**解决：**将web.xml文件换成高版本。主要是替换dtd部分。